(this["webpackJsonpcough-dashboard"]=this["webpackJsonpcough-dashboard"]||[]).push([[0],{287:function(e,t,a){e.exports=a(500)},292:function(e,t,a){},488:function(e,t){},500:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(39),l=a.n(c),u=(a(292),a(293),a(73)),i=a(29),s=function(e,t){switch(t.type){case"FETCH_STUDIES":return Object(i.a)({},e,{isFetching:!0});case"FETCH_STUDIES_SUCCESS":var a=e;return a.studies=t.studies,Object(i.a)({},a,{isFetching:!1});case"FETCH_STUDIES_FAILURE":return Object(i.a)({},e,{isFetching:!1});case"ADD_SURVEY":var n=e;return n.studies.push(t.study),n;case"REMOVE_SURVEY":var r=e,c=r.studies.filter((function(e){return e.title!==t.title}));return r.studies=c,r;default:return e}},o=Object(n.createContext)(),d={isFetching:!0,studies:[]},p=function(e){var t=Object(n.useReducer)(s,d),a=Object(u.a)(t,2),c=a[0],l=a[1];return r.a.createElement(o.Provider,{value:{studies:c,studyDispatch:l}},e.children)},E=function(e,t){switch(t.type){case"FETCH_PARTICIPANTS":return Object(i.a)({},e,{isFetching:!0});case"FETCH_PARTICIPANTS_SUCCESS":var a=e;return a.participants=t.participants,Object(i.a)({},a,{isFetching:!1});case"FETCH_PARTICIPANTS_FAILURE":return Object(i.a)({},e,{isFetching:!1});case"ADD_PARTICIPANT":var n=e;return n.participants.push(t.participant),n;case"REMOVE_PARTICIPANT":var r=e,c=r.participants.filter((function(e){return e.id!==t.id}));return r.participants=c,r;default:return e}},m=Object(n.createContext)(),h={isFetching:!0,participants:[]},f=function(e){var t=Object(n.useReducer)(E,h),a=Object(u.a)(t,2),c=a[0],l=a[1];return r.a.createElement(m.Provider,{value:{participants:c,participantDispatch:l}},e.children)},b=a(46),C=a(511),v=function(){return r.a.createElement("div",null,r.a.createElement("p",null,"PARTICIPANT PAGE"))},T=a(519),y=a(47),I=a.n(y),S=a(82),A=a(85),O={apiKey:"AIzaSyD6hs3mo2Xhj2XLN5Xy75A-GVQLnIbBXZo",authDomain:"cough-detection.firebaseapp.com",databaseURL:"https://cough-detection.firebaseio.com/"};A.initializeApp(O);var D=A.apps.length?A.app():A.initializeApp(O),g=(a(169),D.database()),P=function(){var e=Object(S.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.ref("/studies").once("value").then((function(e){return e.val()}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=D.database(),F=function(){var e=Object(S.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.ref("/participants").once("value").then((function(e){return e.val()}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(S.a)(I.a.mark((function e(t){var a,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:return(a=e.sent).push(t),j.ref("/participants").set(a),e.next=7,P();case 7:(n=e.sent).forEach((function(e){e.title===t.study&&e.participants.push(t.id)})),j.ref("/studies").set(n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=a(513),x=a(84),H=a(512),N=a(501),w=a(517),U=a(518),k=function(e){return r.a.createElement(w.a,{style:{backgroundColor:"#99aacc"}},r.a.createElement(U.a,{as:"h1"},e.text))},J={coughs:[],dateJoined:"2020-04-10",id:"",name:"John Doe",survey:""},L=function(e){var t=e.match.params.studyid,a=Object(n.useContext)(m).participantDispatch,c=Object(n.useState)(J),l=Object(u.a)(c,2),s=l[0],o=l[1],d=Object(b.f)(),p=function(e,t){var a=Object(i.a)({},s);a[e]=t,o(a)};return r.a.createElement(C.a,null,r.a.createElement(k,{text:"Add participant to study: ".concat(t)}),r.a.createElement(_.a,{onSubmit:function(e){var n=Object(i.a)({},s);n.id=Object(T.a)(),n.study=t,e.preventDefault(),a({type:"ADD_PARTICIPANT",participant:{valuesWithId:n}}),R(n),o(J),d.push("/stats-dashboard/study/".concat(t))}},r.a.createElement(_.a.Field,{required:!0},r.a.createElement(x.a,null,"Name"),r.a.createElement(H.a,{type:"text",placeholder:"name",value:s.name,onChange:function(e){return p("name",e.target.value)},required:!0})),r.a.createElement(_.a.Field,{required:!0},r.a.createElement(x.a,null,"Date"),r.a.createElement(H.a,{label:"(YYYY-MM-DD)",type:"text",placeholder:"date",value:s.dateJoined,onChange:function(e){return p("dateJoined",e.target.value)},required:!0})),r.a.createElement(N.a,{type:"submit"},"Add Participant")))},M=a(77),Y=a(515),B=function(e,t){var a=new Set([]);t.forEach((function(e){a.add(e.dateJoined)}));var n={};return n[e]=0,a.forEach((function(e){n[e]=0})),t.forEach((function(e){n[e.dateJoined]++})),Object.keys(n).map((function(e){return{date:e,number:n[e]}}))},V=function(e){var t=e.match.params.studyid,a=Object(n.useContext)(o),c=a.studies,l=a.studyDispatch,u=Object(n.useContext)(m),i=u.participants,s=u.participantDispatch,d=c.studies.filter((function(e){return e.title===t}))[0],p=i.participants.filter((function(e){return d.participants.includes(e.id)})),E=Object(b.f)();return Object(n.useEffect)((function(){d?(l({type:"FETCH_STUDIES"}),s({type:"FETCH_PARTICIPANTS"}),P().then((function(e){l({type:"FETCH_STUDIES_SUCCESS",studies:e})})),F().then((function(e){s({type:"FETCH_PARTICIPANTS_SUCCESS",participants:e})}))):E.push("/stats-dashboard")}),[]),d?r.a.createElement("div",null,r.a.createElement(k,{text:t}),r.a.createElement(w.a,null,r.a.createElement(N.a,{onClick:function(){return E.push("/stats-dashboard/participant/add/".concat(t))}},"ADD PARTICIPANT")),r.a.createElement(w.a,null,r.a.createElement(M.c,{width:500,height:300,data:B(d.startingDate,p)},r.a.createElement(M.d,{dataKey:"date"}),r.a.createElement(M.e,null),r.a.createElement(M.a,{stroke:"#eee",strokeDasharray:"5 5"}),r.a.createElement(M.b,{type:"monotone",dataKey:"number",stroke:"#8884d8"}))),r.a.createElement(w.a,null,r.a.createElement(Y.a,{celled:!0},r.a.createElement(Y.a.Header,null,r.a.createElement(Y.a.HeaderCell,null,"PARTICIPANT ID"),r.a.createElement(Y.a.HeaderCell,null,"PARTICIPANT NAME"),r.a.createElement(Y.a.HeaderCell,null,"PARTICIPANT JOIN DATE")),r.a.createElement(Y.a.Body,null,p.map((function(e){return t=e,r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Cell,null,t.id),r.a.createElement(Y.a.Cell,null,t.name),r.a.createElement(Y.a.Cell,null,t.dateJoined));var t})))))):r.a.createElement("p",null,"Loading")},q=(a(488),function(){var e=Object(n.useContext)(o),t=e.studies,a=e.studyDispatch,c=Object(n.useContext)(m),l=(c.participants,c.participantDispatch),u=Object(b.f)(),i=function(e){return r.a.createElement(Y.a.Row,{onClick:function(){return t=e.title,void u.push("/stats-dashboard/study/".concat(t));var t}},r.a.createElement(Y.a.Cell,null,e.title),r.a.createElement(Y.a.Cell,null,e.startingDate),r.a.createElement(Y.a.Cell,null,e.participants.length))};return Object(n.useEffect)((function(){a({type:"FETCH_STUDIES"}),l({type:"FETCH_PARTICIPANTS"}),P().then((function(e){a({type:"FETCH_STUDIES_SUCCESS",studies:e})})),F().then((function(e){l({type:"FETCH_PARTICIPANTS_SUCCESS",participants:e})}))}),[]),t.isFetching?r.a.createElement("div",null,r.a.createElement("p",null,"Loading ...")):r.a.createElement(C.a,null,r.a.createElement(k,{text:"Home"}),r.a.createElement(Y.a,{celled:!0,selectable:!0},r.a.createElement(Y.a.Header,null,r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.HeaderCell,null,"Title"),r.a.createElement(Y.a.HeaderCell,null,"Starting Date"),r.a.createElement(Y.a.HeaderCell,null,"Number of participants"))),r.a.createElement(Y.a.Body,null,t.studies.map((function(e){return i(e)})))))}),z=function(){return r.a.createElement("div",null,r.a.createElement("p",null,"LOGIN"))},G=function(){return r.a.createElement(C.a,null,r.a.createElement(b.c,null,r.a.createElement(b.a,{exact:!0,path:"/stats-dashboard",render:function(){return r.a.createElement(q,null)}}),r.a.createElement(b.a,{path:"/stats-dashboard/study/:studyid",render:function(e){return r.a.createElement(V,e)}}),r.a.createElement(b.a,{exact:!0,path:"/stats-dashboard/participant",render:function(){return r.a.createElement(v,null)}}),r.a.createElement(b.a,{path:"/stats-dashboard/participant/add/:studyid",render:function(e){return r.a.createElement(L,e)}}),r.a.createElement(b.a,{path:"/stats-dashboard/login",render:function(){return r.a.createElement(z,null)}})))},X=a(38),K=a(516),W=function(){var e=Object(b.f)(),t=function(t){e.push(t)};return r.a.createElement(K.a,{pointing:!0,vertical:!0},r.a.createElement(K.a.Item,{key:"user",onClick:function(){return t("/stats-dashboard")}},r.a.createElement(X.b,{to:"/stats-dashboard"},"User")),r.a.createElement(K.a.Item,{onClick:function(){return t("/stats-dashboard/study/add")}},r.a.createElement(X.b,{to:"/stats-dashboard/study/add"},"add study")))},Q=function(){return r.a.createElement(X.a,null,r.a.createElement(p,null,r.a.createElement(f,null,r.a.createElement(w.a.Group,{horizontal:!0},r.a.createElement(w.a,null,r.a.createElement(W,null)),r.a.createElement(w.a,null,r.a.createElement(G,null))))))};var Z=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Q,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[287,1,2]]]);
//# sourceMappingURL=main.03683c19.chunk.js.map