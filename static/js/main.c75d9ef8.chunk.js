(this["webpackJsonpcough-dashboard"]=this["webpackJsonpcough-dashboard"]||[]).push([[0],{286:function(e,t,a){e.exports=a(499)},291:function(e,t,a){},487:function(e,t){},499:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(39),u=a.n(c),l=(a(291),a(292),a(71)),i=a(29),s=function(e,t){switch(t.type){case"FETCH_STUDIES":return Object(i.a)({},e,{isFetching:!0});case"FETCH_STUDIES_SUCCESS":var a=e;return a.studies=t.studies,Object(i.a)({},a,{isFetching:!1});case"FETCH_STUDIES_FAILURE":return Object(i.a)({},e,{isFetching:!1});case"ADD_SURVEY":var n=e;return n.studies.push(t.study),n;case"REMOVE_SURVEY":var r=e,c=r.studies.filter((function(e){return e.title!==t.title}));return r.studies=c,r;default:return e}},o=Object(n.createContext)(),d={isFetching:!0,studies:[]},p=function(e){var t=Object(n.useReducer)(s,d),a=Object(l.a)(t,2),c=a[0],u=a[1];return r.a.createElement(o.Provider,{value:{studies:c,studyDispatch:u}},e.children)},E=function(e,t){switch(t.type){case"FETCH_PARTICIPANTS":return Object(i.a)({},e,{isFetching:!0});case"FETCH_PARTICIPANTS_SUCCESS":var a=e;return a.participants=t.participants,Object(i.a)({},a,{isFetching:!1});case"FETCH_PARTICIPANTS_FAILURE":return Object(i.a)({},e,{isFetching:!1});case"ADD_PARTICIPANT":var n=e;return n.participants.push(t.participant),n;case"REMOVE_PARTICIPANT":var r=e,c=r.participants.filter((function(e){return e.id!==t.id}));return r.participants=c,r;default:return e}},m=Object(n.createContext)(),h={isFetching:!0,participants:[]},f=function(e){var t=Object(n.useReducer)(E,h),a=Object(l.a)(t,2),c=a[0],u=a[1];return r.a.createElement(m.Provider,{value:{participants:c,participantDispatch:u}},e.children)},C=a(46),b=a(511),T=function(){return r.a.createElement("div",null,r.a.createElement("p",null,"PARTICIPANT PAGE"))},v=a(517),I=a(47),A=a.n(I),S=a(82),y=a(85),D={apiKey:"AIzaSyD6hs3mo2Xhj2XLN5Xy75A-GVQLnIbBXZo",authDomain:"cough-detection.firebaseapp.com",databaseURL:"https://cough-detection.firebaseio.com/"};y.initializeApp(D);var O=y.apps.length?y.app():y.initializeApp(D),P=(a(169),O.database()),g=function(){var e=Object(S.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.ref("/studies").once("value").then((function(e){return e.val()}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=O.database(),R=function(){var e=Object(S.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.ref("/participants").once("value").then((function(e){return e.val()}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(S.a)(A.a.mark((function e(t){var a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:return(a=e.sent).push(t),j.ref("/participants").set(a),e.next=7,g();case 7:(n=e.sent).forEach((function(e){e.title===t.study&&e.participants.push(t.id)})),j.ref("/studies").set(n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=a(518),N=a(513),H=a(84),w=a(512),U=a(500),x={coughs:[],dateJoined:"2020-04-10",id:"",name:"John Doe",survey:""},k=function(e){var t=e.match.params.studyid,a=Object(n.useContext)(m).participantDispatch,c=Object(n.useState)(x),u=Object(l.a)(c,2),s=u[0],o=u[1],d=Object(C.f)(),p=function(e,t){var a=Object(i.a)({},s);a[e]=t,o(a)};return r.a.createElement(b.a,null,r.a.createElement(_.a,null,r.a.createElement("p",null,"ADDING PARTICIPANT TO STUDY: ",t)),r.a.createElement(N.a,{onSubmit:function(e){var n=Object(i.a)({},s);n.id=Object(v.a)(),n.study=t,e.preventDefault(),a({type:"ADD_PARTICIPANT",participant:{valuesWithId:n}}),F(n),o(x),d.push("/stats-dashboard/study/".concat(t))}},r.a.createElement(N.a.Field,{required:!0},r.a.createElement(H.a,null,"Name"),r.a.createElement(w.a,{type:"text",placeholder:"name",value:s.name,onChange:function(e){return p("name",e.target.value)},required:!0})),r.a.createElement(N.a.Field,{required:!0},r.a.createElement(H.a,null,"Date"),r.a.createElement(w.a,{label:"(YYYY-MM-DD)",type:"text",placeholder:"date",value:s.dateJoined,onChange:function(e){return p("dateJoined",e.target.value)},required:!0})),r.a.createElement(U.a,{type:"submit"},"Add Participant")))},J=a(75),L=a(515),Y=function(e,t){var a=new Set([]);t.forEach((function(e){a.add(e.dateJoined)}));var n={};return n[e]=0,a.forEach((function(e){n[e]=0})),t.forEach((function(e){n[e.dateJoined]++})),Object.keys(n).map((function(e){return{date:e,number:n[e]}}))},M=function(e){var t=e.match.params.studyid,a=Object(n.useContext)(o),c=a.studies,u=a.studyDispatch,l=Object(n.useContext)(m),i=l.participants,s=l.participantDispatch,d=c.studies.filter((function(e){return e.title===t}))[0],p=i.participants.filter((function(e){return d.participants.includes(e.id)})),E=Object(C.f)();return Object(n.useEffect)((function(){d?(u({type:"FETCH_STUDIES"}),s({type:"FETCH_PARTICIPANTS"}),g().then((function(e){u({type:"FETCH_STUDIES_SUCCESS",studies:e})})),R().then((function(e){s({type:"FETCH_PARTICIPANTS_SUCCESS",participants:e})}))):E.push("/stats-dashboard")}),[]),d?r.a.createElement("div",null,r.a.createElement(_.a,null,r.a.createElement(U.a,{onClick:function(){return E.push("/participant/add/".concat(t))}},"ADD PARTICIPANT")),r.a.createElement(_.a,null,r.a.createElement(J.c,{width:500,height:300,data:Y(d.startingDate,p)},r.a.createElement(J.d,{dataKey:"date"}),r.a.createElement(J.e,null),r.a.createElement(J.a,{stroke:"#eee",strokeDasharray:"5 5"}),r.a.createElement(J.b,{type:"monotone",dataKey:"number",stroke:"#8884d8"}))),r.a.createElement(_.a,null,r.a.createElement(L.a,{celled:!0},r.a.createElement(L.a.Header,null,r.a.createElement(L.a.HeaderCell,null,"PARTICIPANT ID"),r.a.createElement(L.a.HeaderCell,null,"PARTICIPANT NAME"),r.a.createElement(L.a.HeaderCell,null,"PARTICIPANT JOIN DATE")),r.a.createElement(L.a.Body,null,p.map((function(e){return t=e,r.a.createElement(L.a.Row,null,r.a.createElement(L.a.Cell,null,t.id),r.a.createElement(L.a.Cell,null,t.name),r.a.createElement(L.a.Cell,null,t.dateJoined));var t})))))):r.a.createElement("p",null,"Loading")},B=(a(487),function(){var e=Object(n.useContext)(o),t=e.studies,a=e.studyDispatch,c=Object(n.useContext)(m),u=(c.participants,c.participantDispatch),l=Object(C.f)(),i=function(e){return r.a.createElement(L.a.Row,{onClick:function(){return t=e.title,void l.push("/stats-dashboard/study/".concat(t));var t}},r.a.createElement(L.a.Cell,null,e.title),r.a.createElement(L.a.Cell,null,e.startingDate),r.a.createElement(L.a.Cell,null,e.participants.length))};return Object(n.useEffect)((function(){a({type:"FETCH_STUDIES"}),u({type:"FETCH_PARTICIPANTS"}),g().then((function(e){a({type:"FETCH_STUDIES_SUCCESS",studies:e})})),R().then((function(e){u({type:"FETCH_PARTICIPANTS_SUCCESS",participants:e})}))}),[]),t.isFetching?r.a.createElement("div",null,r.a.createElement("p",null,"Loading ...")):r.a.createElement(L.a,{celled:!0,selectable:!0},r.a.createElement(L.a.Header,null,r.a.createElement(L.a.Row,null,r.a.createElement(L.a.HeaderCell,null,"Title"),r.a.createElement(L.a.HeaderCell,null,"Starting Date"),r.a.createElement(L.a.HeaderCell,null,"Number of participants"))),r.a.createElement(L.a.Body,null,t.studies.map((function(e){return i(e)}))))}),G=function(){return r.a.createElement("div",null,r.a.createElement("p",null,"LOGIN"))},V=function(){return r.a.createElement(b.a,null,r.a.createElement(C.c,null,r.a.createElement(C.a,{exact:!0,path:"/stats-dashboard",render:function(){return r.a.createElement(B,null)}}),r.a.createElement(C.a,{path:"/stats-dashboard/study/:studyid",render:function(e){return r.a.createElement(M,e)}}),r.a.createElement(C.a,{exact:!0,path:"/stats-dashboard/participant",render:function(){return r.a.createElement(T,null)}}),r.a.createElement(C.a,{path:"/stats-dashboard/participant/add/:studyid",render:function(e){return r.a.createElement(k,e)}}),r.a.createElement(C.a,{path:"/stats-dashboard/login",render:function(){return r.a.createElement(G,null)}})))},q=a(38),z=a(516),X=function(){var e=Object(C.f)(),t=function(t){e.push(t)};return r.a.createElement(z.a,{pointing:!0,vertical:!0},r.a.createElement(z.a.Item,{key:"user",onClick:function(){return t("/stats-dashboard")}},r.a.createElement(q.b,{to:"/stats-dashboard"},"User")),r.a.createElement(z.a.Item,{onClick:function(){return t("/stats-dashboard/study/add")}},r.a.createElement(q.b,{to:"/stats-dashboard/study/add"},"add study")))},K=function(){return r.a.createElement(q.a,null,r.a.createElement(p,null,r.a.createElement(f,null,r.a.createElement(_.a.Group,{horizontal:!0},r.a.createElement(_.a,null,r.a.createElement(X,null)),r.a.createElement(_.a,null,r.a.createElement(V,null))))))};var W=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(K,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[286,1,2]]]);
//# sourceMappingURL=main.c75d9ef8.chunk.js.map